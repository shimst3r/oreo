pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
function _init()
 state={}
 init_game()
end

function init_game()
 state.grid=new_grid()
 state.player=new_player(15,5,⬇️)
 state.phase="running"
end
-->8
function _draw()
 cls(0)
 if state.phase=="running" then
  draw_grid(state.grid)
  draw_player(state.player)
 end
end

function draw_block(row,col,sprite)
 spr(sprite,col*8,row*8)
end

function draw_grid(grid)
 for row,rs in pairs(grid) do
  for col,sprite in pairs(rs) do
   draw_block(row,col,sprite)
  end
 end
end

function draw_player(player)
 for block in all({player.head,player.torso}) do
  draw_block(block.row,block.col,block.sprite)
 end
end
-->8
function _update()
 if state.phase=="running" then
  state=update_running(state)
 end
end

function update_running(state)
 local _s=state
 
 _s.player=update_player(_s.player)
 return _s
end

function update_player(player)
 local _p=player
 if btnp(⬅️) then
  _p=move_left(_p)  
 elseif btnp(⬆️) then
  _p=move_up(_p)
 elseif btnp(➡️) then
  _p=move_right(_p)
 elseif btnp(⬇️) then
  _p=move_down(_p)
 end
 return _p
end
-->8
function move_down(player)
 return new_player(15,player.torso.col,⬇️)
end

function move_left(player)
 return new_player(player.torso.row,0,⬅️)
end

function move_right(player)
 return new_player(player.torso.row,15,➡️)
end

function move_up(player)
 return new_player(0,player.torso.col,⬆️)
end

function new_grid()
 local grid={}
 for row=0,15 do
  grid[row]={}
  for col=0,15 do
   grid[row][col]=_sprites.blank
  end
 end
 return grid
end

function new_player(row,col,dir)
 local torso={row=row,col=col,sprite=_sprites.torso}
 local head={}
 if dir==⬅️ then
  head={row=torso.row,col=torso.col+1,sprite=_sprites.head_right}
 elseif dir==⬆️ then
  head={row=torso.row+1,col=torso.col,sprite=_sprites.head_down}
 elseif dir==➡️ then
  head={row=torso.row,col=torso.col-1,sprite=_sprites.head_left}
 elseif dir==⬇️ then
  head={row=torso.row-1,col=torso.col,sprite=_sprites.head_up}
 end
 
 return {head=head,torso=torso}
end

_sprites={
 head_left=01,
 head_up=02,
 head_right=03,
 head_down=04,
 torso=17,
 blank=32,
 frame=33
}
__gfx__
0000000004fffff0044444400fffff400ffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000004fffffff4ffffff4fffffff4ffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007004ffffffffffffffffffffff4ffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770004ffffffffffffffffffffff4ffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770004ffffffffffffffffffffff4ffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007004ffffffffffffffffffffff4ffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000004ffffffffffffffffffffff44ffffff40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000004fffff00ffffff00fffff40044444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000001cccccc10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000001cccccc10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000001cccccc10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000001cccccc10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000001cccccc10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000001cccccc10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
00000000000000000000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000000000000000
__label__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555444444555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555554ffffff455555555555555555555555555555555555555555555555555555555555555555555555555555555
0000000055555555555555555555555555555555ffffffff55555555555555555555555555555555555555555555555555555555555555555555555555555555
0000000055555555555555555555555555555555ffffffff55555555555555555555555555555555555555555555555555555555555555555555555555555555
0000000055555555555555555555555555555555ffffffff55555555555555555555555555555555555555555555555555555555555555555555555555555555
0000000055555555555555555555555555555555ffffffff55555555555555555555555555555555555555555555555555555555555555555555555555555555
0000000055555555555555555555555555555555ffffffff55555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555555ffffff555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555551111111155555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555551cccccc155555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555551cccccc155555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555551cccccc155555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555551cccccc155555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555551cccccc155555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555551cccccc155555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000555555555555555555555555555555551111111155555555555555555555555555555555555555555555555555555555555555555555555555555555

